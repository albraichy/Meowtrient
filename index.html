<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø­Ø§Ø³Ø¨Ø© Ø­ØµÙ‘Ø© Ø£ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø·</title>
  <style>
    :root{
      --bg:#0f172a; --card:#0b1220; --ring:#334155; --text:#e5e7eb; --muted:#94a3b8;
      --hx:#a7f3d0; --accent:#22c55e; --accent2:#10b981; --line:#1f2937;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:radial-gradient(1000px 700px at 80% -10%, #1f2937 0%, var(--bg) 60%);
      color:var(--text); font-family:"Cairo", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      line-height:1.6;
    }
    header{padding:20px 16px 6px; text-align:center}
    h1{
      margin:0; font-size:clamp(20px,3.5vw,28px); font-weight:800; letter-spacing:.2px;
      background:linear-gradient(90deg,#fff,var(--hx) 60%,#fff); -webkit-background-clip:text; background-clip:text; color:transparent
    }
    .container{width:min(960px,92%); margin:12px auto 40px}
    .grid{display:grid; grid-template-columns:1fr; gap:12px}
    @media(min-width:860px){.grid{grid-template-columns:1fr 1fr}}
    .card{
      background:linear-gradient(180deg,var(--card),#091225ee); border:1px solid var(--line);
      border-radius:16px; padding:14px; box-shadow:0 10px 28px rgba(0,0,0,.25); backdrop-filter:blur(6px)
    }
    /* smaller input section headings */
    .section-title{font-size:13px; font-weight:800; color:#bbf7d0; background:#052e1a; border:1px solid #064e3b;
      display:inline-flex; align-items:center; gap:8px; padding:5px 10px; border-radius:999px; margin-bottom:6px}
    label{
      display:block; font-weight:700; margin-bottom:6px; color:#cbd5e1;
      font-size:14px; /* smaller labels */
    }
    input{
      width:100%; padding:10px 12px; border-radius:12px; background:#0a0f1a; border:1px solid var(--ring);
      outline:none; color:var(--text); font-size:15px
    }
    input::placeholder{color:#64748b}
    input:focus{border-color:var(--accent); box-shadow:0 0 0 3px #22c55e22}
    .two{display:grid; grid-template-columns:1fr; gap:8px}
    @media(min-width:600px){.two{grid-template-columns:1fr 1fr}}
    .controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px}
    .btn{padding:10px 14px; border-radius:12px; border:1px solid var(--line); background:#0b1325; color:var(--text);
      font-weight:800; cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2)); color:#052e1a; border:none}
    .results{display:grid; grid-template-columns:1fr; gap:8px; margin-top:6px}
    @media(min-width:520px){.results{grid-template-columns:repeat(3,1fr)}}
    .result{border:1px dashed var(--line); border-radius:14px; background:#0a0f1a; padding:12px}
    .label{color:#93c5fd; font-size:12px}
    .value{font-weight:900; font-size:clamp(18px,3vw,26px)}
    .unit{font-size:.8em; color:#94a3b8; font-weight:700}
    table{width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:12px; margin-top:6px}
    thead th{background:#0b1325; color:#cbd5e1; text-align:right; padding:10px; font-size:13px; border-bottom:1px solid var(--line)}
    tbody td{padding:10px; border-bottom:1px dashed var(--line); color:#e5e7eb; font-size:14px}
    tbody tr:last-child td{border-bottom:none}
    .sep{height:1px; background:var(--line); margin:10px 0}
    footer{padding:16px 0 26px; text-align:center; color:#94a3b8; font-size:12.5px}
  </style>
</head>
<body>
  <header>
    <h1>Ø­Ø§Ø³Ø¨Ø© Ø­ØµÙ‘Ø© Ø£ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø·</h1>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <div class="section-title">âš™ï¸ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
        <div class="two">
          <div>
            <label for="serving">Ø­Ø¬Ù… Ø§Ù„Ø­ØµÙ‘Ø© (Øº)</label>
            <input id="serving" type="number" step="0.1" min="0" placeholder="Ù…Ø«Ø§Ù„: 50">
          </div>
          <div>
            <label for="protein">Ø¨Ø±ÙˆØªÙŠÙ† %</label>
            <input id="protein" type="number" step="0.1" min="0" max="100" placeholder="Ù…Ø«Ø§Ù„: 10">
          </div>
        </div>
        <div class="two" style="margin-top:6px">
          <div>
            <label for="fat">Ø¯Ù‡ÙˆÙ† %</label>
            <input id="fat" type="number" step="0.1" min="0" max="100" placeholder="Ù…Ø«Ø§Ù„: 5">
          </div>
          <div>
            <label for="fiber">Ø£Ù„ÙŠØ§Ù %</label>
            <input id="fiber" type="number" step="0.1" min="0" max="100" placeholder="Ù…Ø«Ø§Ù„: 1.5">
          </div>
        </div>
        <div class="two" style="margin-top:6px">
          <div>
            <label for="moisture">Ø±Ø·ÙˆØ¨Ø© %</label>
            <input id="moisture" type="number" step="0.1" min="0" max="100" placeholder="Ù…Ø«Ø§Ù„: 78">
          </div>
          <div>
            <label for="ash">Ø±Ù…Ø§Ø¯ %</label>
            <input id="ash" type="number" step="0.1" min="0" max="100" placeholder="Ù…Ø«Ø§Ù„: 2.5">
          </div>
        </div>

        <div class="controls">
          <button class="btn primary" id="calc">Ø§Ø­Ø³Ø¨</button>
          <button class="btn" id="reset">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
        </div>
      </section>

      <section class="card">
        <div class="section-title">ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬</div>
        <div class="results">
          <div class="result">
            <div class="label">% NFE (Ø§Ù„ÙƒØ§Ø±Ø¨ Ø§Ù„Ù…Ø­Ø³ÙˆØ¨)</div>
            <div class="value"><span id="nfePct">â€”</span> <span class="unit">%</span></div>
          </div>
          <div class="result">
            <div class="label">kcal Ù„ÙƒÙ„ 100Øº</div>
            <div class="value"><span id="kcal100">â€”</span> <span class="unit">kcal/100g</span></div>
          </div>
          <div class="result">
            <div class="label">Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ù„ÙƒÙ„ Ø­ØµÙ‘Ø©</div>
            <div class="value"><span id="kcalServing">â€”</span> <span class="unit">kcal</span></div>
          </div>
        </div>

        <div class="sep"></div>
        <table>
          <thead>
            <tr><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>ØºØ±Ø§Ù… Ù„ÙƒÙ„ Ø­ØµÙ‘Ø©</th></tr>
          </thead>
          <tbody>
            <tr><td>Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†</td><td id="gProtein">â€”</td></tr>
            <tr><td>Ø§Ù„Ø¯Ù‡ÙˆÙ†</td><td id="gFat">â€”</td></tr>
            <tr><td>Ø§Ù„Ø£Ù„ÙŠØ§Ù</td><td id="gFiber">â€”</td></tr>
            <tr><td>Ø§Ù„Ø±Ø·ÙˆØ¨Ø©</td><td id="gMoisture">â€”</td></tr>
            <tr><td>Ø§Ù„Ø±Ù…Ø§Ø¯</td><td id="gAsh">â€”</td></tr>
            <tr><td>NFE (Ø§Ù„ÙƒØ§Ø±Ø¨)</td><td id="gNfe">â€”</td></tr>
          </tbody>
        </table>
      </section>
    </div>
  </main>

  <footer>
    Â© 2025 albraichy â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
  </footer>

  <script>
    // Modified Atwater factors (kcal per gram)
    const ATW = { protein: 3.5, fat: 8.5, carb: 3.5 };

    function nfePercent(p,f,fi,m,a){
      let s = (p||0)+(f||0)+(fi||0)+(m||0)+(a||0);
      return 100 - s;
    }
    function kcalPer100g(p,f,fi,m,a){
      const nfe = nfePercent(p,f,fi,m,a);
      const kcal = (p*ATW.protein) + (nfe*ATW.carb) + (f*ATW.fat);
      return { kcal100: kcal, nfe };
    }
    function byPct(serving, pct){ return serving * (pct/100); }
    function fmt(x, d=1){ return (isFinite(x)? Number(x).toFixed(d): 'â€”'); }

    function calc(){
      const serving = parseFloat(document.getElementById('serving').value);
      const p = parseFloat(document.getElementById('protein').value);
      const f = parseFloat(document.getElementById('fat').value);
      const fi = parseFloat(document.getElementById('fiber').value);
      const m = parseFloat(document.getElementById('moisture').value);
      const a = parseFloat(document.getElementById('ash').value);

      if(!(serving>0)){ alert('Ø­Ø¬Ù… Ø§Ù„Ø­ØµÙ‘Ø© Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ø±Ù‚Ù… ØµØ­ÙŠØ­ (>0).'); return; }

      const { kcal100, nfe } = kcalPer100g(p||0,f||0,fi||0,m||0,a||0);
      const kcalServing = kcal100 * (serving/100);

      const gP = byPct(serving, p||0);
      const gF = byPct(serving, f||0);
      const gFi = byPct(serving, fi||0);
      const gM = byPct(serving, m||0);
      const gA = byPct(serving, a||0);
      const gN = byPct(serving, nfe);

      document.getElementById('nfePct').textContent = fmt(nfe, 1);
      document.getElementById('kcal100').textContent = fmt(kcal100, 1);
      document.getElementById('kcalServing').textContent = fmt(kcalServing, 1);

      document.getElementById('gProtein').textContent = fmt(gP, 1);
      document.getElementById('gFat').textContent = fmt(gF, 1);
      document.getElementById('gFiber').textContent = fmt(gFi, 1);
      document.getElementById('gMoisture').textContent = fmt(gM, 1);
      document.getElementById('gAsh').textContent = fmt(gA, 1);
      document.getElementById('gNfe').textContent = fmt(gN, 1);
    }

    function resetAll(){
      ['serving','protein','fat','fiber','moisture','ash'].forEach(id=>document.getElementById(id).value='');
      ['nfePct','kcal100','kcalServing','gProtein','gFat','gFiber','gMoisture','gAsh','gNfe'].forEach(id=>document.getElementById(id).textContent='â€”');
    }

    document.getElementById('calc').addEventListener('click', calc);
    document.getElementById('reset').addEventListener('click', resetAll);
  </script>
</body>
</html>
