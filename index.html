<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>حاسبة حصص أكل القطط</title>
  <style>
    :root{
      --bg:#0f172a;         /* slate-900 */
      --card:#111827;       /* gray-900 */
      --muted:#94a3b8;      /* slate-400 */
      --text:#e5e7eb;       /* gray-200 */
      --accent:#22c55e;     /* green-500 */
      --accent-2:#10b981;   /* emerald-500 */
      --danger:#ef4444;     /* red-500 */
      --ring:#334155;       /* slate-700 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 800px at 80% -10%, #1f2937 0%, var(--bg) 60%);
      color:var(--text); font-family: ui-rounded, "Cairo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      line-height:1.6;
      display:flex; flex-direction:column;
      min-height:100vh;
    }
    header{
      padding:28px 20px 10px; text-align:center;
    }
    .title{
      font-weight:800; font-size: clamp(22px, 4vw, 34px);
      letter-spacing:.2px;
      background: linear-gradient(90deg, #e5e7eb, #a7f3d0 60%, #e5e7eb);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .subtitle{
      color:var(--muted); font-size:14px; margin-top:6px;
    }
    .container{ width:min(980px, 92%); margin:16px auto 90px; }
    .grid{
      display:grid; gap:14px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 860px){
      .grid{grid-template-columns: 1fr 1fr;}
    }
    .card{
      background: linear-gradient(180deg, #0b1220, #0b1220cc);
      border:1px solid #1f2937; border-radius:16px;
      padding:18px; box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(6px);
    }
    label{display:block; font-weight:700; margin-bottom:8px; color:#cbd5e1}
    .row{display:flex; gap:10px}
    input, select{
      width:100%; padding:12px 14px; border-radius:12px;
      background:#0a0f1a; border:1px solid var(--ring);
      color:var(--text); outline:none; font-size:16px;
      transition: border-color .18s ease, box-shadow .18s ease;
    }
    input::placeholder{color:#64748b}
    input:focus, select:focus{border-color:var(--accent); box-shadow:0 0 0 3px #22c55e22}
    .hint{font-size:12px; color:var(--muted); margin-top:6px}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px; font-size:12px; color:#bbf7d0;
      background:#052e1a; border:1px solid #064e3b; margin-bottom:10px;
    }
    .results{
      display:grid; grid-template-columns:1fr; gap:12px; margin-top:6px;
    }
    @media (min-width: 480px){
      .results{ grid-template-columns: repeat(3, 1fr); }
    }
    .result{
      border-radius:14px; padding:14px; background:#0a0f1a; border:1px dashed #1f2937;
    }
    .result .label{ color:#93c5fd; font-size:12px; margin-bottom:8px }
    .result .value{ font-weight:900; font-size: clamp(18px, 3vw, 28px); line-height:1.2 }
    .unit{ font-size:.8em; color:#94a3b8; font-weight:600 }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px }
    .btn{
      padding:10px 14px; border-radius:12px; border:1px solid #1f2937;
      background:#0b1325; color:var(--text); font-weight:700; cursor:pointer;
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
    }
    .btn:hover{ background:#0e1830 }
    .btn:active{ transform: translateY(1px) }
    .btn.primary{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); color:#052e1a; border:none }
    .two-col{ display:grid; grid-template-columns:1fr; gap:10px }
    @media(min-width:600px){ .two-col{ grid-template-columns: 1fr 1fr } }
    footer{
      position:fixed; inset-inline:0; bottom:0;
      background:#020617f2; border-top:1px solid #1f2937;
      padding:10px 14px; font-size:12.5px; color:#cbd5e1;
      display:flex; justify-content:center; z-index:50;
    }
    footer .inner{ width:min(980px, 92%); text-align:justify; text-align-last:right }
    footer b{ font-weight:800 }
    .warn{ display:inline-block; margin-inline-end:6px }
    .muted{ color:#94a3b8 }
    .tiny{ font-size:11px }
    .mini{ font-size:12px; color:#a3e635 }
    .sep{ height:1px; background:#1f2937; margin:12px 0 }
    .notice{ font-size:12px; color:#93c5fd }
  </style>
</head>
<body>
  <header>
    <div class="title">حاسبة حصص أكل القطط</div>
    <div class="subtitle">احسب كمية الأكل بالجرام لكل وجبة بسهولة — مبنية على وزن القط، عامل النشاط، وعدد الوجبات.</div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <div class="badge">⚙️ إدخال البيانات</div>
        <div class="two-col">
          <div>
            <label for="weight">وزن القط (كجم)</label>
            <input id="weight" type="number" step="0.01" placeholder="مثال: 3.8" inputmode="decimal">
            <div class="hint">احسب بالميزان لأقرب 0.1 كجم.</div>
          </div>
          <div>
            <label for="meals">عدد الوجبات باليوم</label>
            <input id="meals" type="number" step="1" min="1" placeholder="مثال: 3">
            <div class="hint">يفضل تقسيم اليوم 2–4 وجبات حسب الروتين.</div>
          </div>
        </div>

        <div class="two-col" style="margin-top:10px">
          <div>
            <label for="life">حالة/نشاط القط</label>
            <select id="life">
              <option value="1.0">مخصص (سأدخل السعرات يدويًا)</option>
              <option value="1.2">بالغ مخصي/منزلي (1.2×)</option>
              <option value="1.4">بالغ نشيط (1.4×)</option>
              <option value="1.6">قط صغير (نمو) (1.6×)</option>
              <option value="1.8">مرض/تعافي بإشراف بيطري (1.8× تقديري)</option>
            </select>
            <div class="hint">المعامل يضرب RER = 70 × الوزن^0.75 للحصول على MER (سعرات/يوم).</div>
          </div>
          <div>
            <label for="energy100">كثافة الأكل (كيلو كالوري لكل 100غ)</label>
            <input id="energy100" type="number" step="0.1" placeholder="مثال: 90">
            <div class="hint">موجود على العلبة: &quot;kcal per 100g&quot; أو &quot;kcal/kg&quot;.</div>
          </div>
        </div>

        <div class="two-col" style="margin-top:10px">
          <div>
            <label for="customKcal">سعرات/يوم (اختياري لو تبي تدخلها يدويًا)</label>
            <input id="customKcal" type="number" step="1" placeholder="اتركه فاضي إذا تبي الحاسبة تحسب تلقائي">
            <div class="hint">لو كتبت قيمة هنا، بتتجاهل الحاسبة معامل النشاط وتحسب مباشرة.</div>
          </div>
          <div>
            <label for="rounding">تقريب القياسات</label>
            <select id="rounding">
              <option value="1">1 غرام</option>
              <option value="2">2 غرام</option>
              <option value="5" selected>5 غرام</option>
              <option value="10">10 غرام</option>
            </select>
            <div class="hint">اختر أقرب دقة لميزانك المنزلي.</div>
          </div>
        </div>

        <div class="controls">
          <button class="btn primary" id="calcBtn">احسب</button>
          <button class="btn" id="resetBtn">إعادة ضبط</button>
          <div class="notice">الصيغة: <span class="mini">RER = 70 × (الوزن^0.75)</span> ← <span class="mini">MER = RER × المعامل</span></div>
        </div>
      </section>

      <section class="card">
        <div class="badge">📊 النتائج</div>
        <div class="results">
          <div class="result">
            <div class="label">السعرات اليومية</div>
            <div class="value"><span id="mer">—</span> <span class="unit">kcal/يوم</span></div>
          </div>
          <div class="result">
            <div class="label">الكمية اليومية</div>
            <div class="value"><span id="gDay">—</span> <span class="unit">غ/يوم</span></div>
          </div>
          <div class="result">
            <div class="label">الكمية لكل وجبة</div>
            <div class="value"><span id="gMeal">—</span> <span class="unit">غ/وجبة</span></div>
          </div>
        </div>

        <div class="sep"></div>
        <div class="hint">
          التحويل: <span class="tiny">الجرامات/يوم = (السعرات/يوم) ÷ (kcal لكل 100غ) × 100</span> •
          <span class="tiny">الجرامات/وجبة = الجرامات/يوم ÷ عدد الوجبات</span>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="inner">
      <span class="warn">⚠️</span>
      <b>تنويه:</b> تم تصميم وتطوير المعادلة المستخدمة بشكل خاص من قِبل مطوّر الموقع دون الاعتماد على المعادلات العامة، تهدف القيم الناتجة إلى تقديم أقرب التقديرات للمساعدة فقط، ولا تُعد بديلاً عن استشارة الطبيب البيطري المختص.
    </div>
  </footer>

  <script>
    function pow075(x){ return Math.pow(x, 0.75); }
    function roundTo(val, step){ return Math.round(val/step)*step; }

    function parseNum(id){
      const el = document.getElementById(id);
      const v = parseFloat(el.value);
      return isFinite(v) ? v : null;
    }

    function setText(id, text){ document.getElementById(id).textContent = text; }

    function calc(){
      const w = parseNum('weight');
      const meals = parseNum('meals');
      const e100 = parseNum('energy100');
      const life = parseFloat(document.getElementById('life').value);
      const custom = parseNum('customKcal');
      const step = parseFloat(document.getElementById('rounding').value);

      // basic validation
      if(!w || w<=0){ alert('حط وزن صحيح.'); return; }
      if(!meals || meals<=0){ alert('حدد عدد الوجبات (واحدة على الأقل).'); return; }
      if(!e100 || e100<=0){ alert('أدخل كثافة الأكل (kcal لكل 100غ).'); return; }

      let mer;
      if(custom && custom>0){
        mer = custom;
      }else{
        const RER = 70 * pow075(w);
        mer = RER * life;
      }

      const gPerDay = (mer / e100) * 100;
      const gPerMeal = gPerDay / meals;

      setText('mer', Math.round(mer));
      setText('gDay', roundTo(gPerDay, step).toFixed(0));
      setText('gMeal', roundTo(gPerMeal, step).toFixed(0));
    }

    function resetAll(){
      ['weight','meals','energy100','customKcal'].forEach(id => document.getElementById(id).value='');
      document.getElementById('life').value='1.0';
      document.getElementById('rounding').value='5';
      ['mer','gDay','gMeal'].forEach(id => setText(id, '—'));
    }

    document.getElementById('calcBtn').addEventListener('click', calc);
    document.getElementById('resetBtn').addEventListener('click', resetAll);

    // Simple deep-link: read URL params ?w=&meals=&e100=&life=&custom=
    (function initFromQuery(){
      const p = new URLSearchParams(location.search);
      if(p.has('w')) document.getElementById('weight').value = p.get('w');
      if(p.has('meals')) document.getElementById('meals').value = p.get('meals');
      if(p.has('e100')) document.getElementById('energy100').value = p.get('e100');
      if(p.has('life')) document.getElementById('life').value = p.get('life');
      if(p.has('custom')) document.getElementById('customKcal').value = p.get('custom');
      if(p.has('round')) document.getElementById('rounding').value = p.get('round');
    })();
  </script>
</body>
</html>
