<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø­Ø§Ø³Ø¨Ø© Ø­ØµØµ Ø£ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø·</title>
  <style>
    :root{
      --bg:#0f172a;         /* slate-900 */
      --card:#111827;       /* gray-900 */
      --muted:#94a3b8;      /* slate-400 */
      --text:#e5e7eb;       /* gray-200 */
      --accent:#22c55e;     /* green-500 */
      --accent-2:#10b981;   /* emerald-500 */
      --danger:#ef4444;     /* red-500 */
      --ring:#334155;       /* slate-700 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 800px at 80% -10%, #1f2937 0%, var(--bg) 60%);
      color:var(--text); font-family: ui-rounded, "Cairo", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      line-height:1.6;
      display:flex; flex-direction:column;
      min-height:100vh;
    }
    header{
      padding:28px 20px 10px; text-align:center;
    }
    .title{
      font-weight:800; font-size: clamp(22px, 4vw, 34px);
      letter-spacing:.2px;
      background: linear-gradient(90deg, #e5e7eb, #a7f3d0 60%, #e5e7eb);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .subtitle{
      color:var(--muted); font-size:14px; margin-top:6px;
    }
    .container{ width:min(980px, 92%); margin:16px auto 90px; }
    .grid{
      display:grid; gap:14px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 860px){
      .grid{grid-template-columns: 1fr 1fr;}
    }
    .card{
      background: linear-gradient(180deg, #0b1220, #0b1220cc);
      border:1px solid #1f2937; border-radius:16px;
      padding:18px; box-shadow: 0 10px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(6px);
    }
    label{display:block; font-weight:700; margin-bottom:8px; color:#cbd5e1}
    .row{display:flex; gap:10px}
    input, select{
      width:100%; padding:12px 14px; border-radius:12px;
      background:#0a0f1a; border:1px solid var(--ring);
      color:var(--text); outline:none; font-size:16px;
      transition: border-color .18s ease, box-shadow .18s ease;
    }
    input::placeholder{color:#64748b}
    input:focus, select:focus{border-color:var(--accent); box-shadow:0 0 0 3px #22c55e22}
    .hint{font-size:12px; color:var(--muted); margin-top:6px}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px; font-size:12px; color:#bbf7d0;
      background:#052e1a; border:1px solid #064e3b; margin-bottom:10px;
    }
    .results{
      display:grid; grid-template-columns:1fr; gap:12px; margin-top:6px;
    }
    @media (min-width: 480px){
      .results{ grid-template-columns: repeat(3, 1fr); }
    }
    .result{
      border-radius:14px; padding:14px; background:#0a0f1a; border:1px dashed #1f2937;
    }
    .result .label{ color:#93c5fd; font-size:12px; margin-bottom:8px }
    .result .value{ font-weight:900; font-size: clamp(18px, 3vw, 28px); line-height:1.2 }
    .unit{ font-size:.8em; color:#94a3b8; font-weight:600 }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px }
    .btn{
      padding:10px 14px; border-radius:12px; border:1px solid #1f2937;
      background:#0b1325; color:var(--text); font-weight:700; cursor:pointer;
      transition: transform .08s ease, background .18s ease, border-color .18s ease;
    }
    .btn:hover{ background:#0e1830 }
    .btn:active{ transform: translateY(1px) }
    .btn.primary{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); color:#052e1a; border:none }
    .two-col{ display:grid; grid-template-columns:1fr; gap:10px }
    @media(min-width:600px){ .two-col{ grid-template-columns: 1fr 1fr } }
    footer{
      position:fixed; inset-inline:0; bottom:0;
      background:#020617f2; border-top:1px solid #1f2937;
      padding:10px 14px; font-size:12.5px; color:#cbd5e1;
      display:flex; justify-content:center; z-index:50;
    }
    footer .inner{ width:min(980px, 92%); text-align:justify; text-align-last:right }
    footer b{ font-weight:800 }
    .warn{ display:inline-block; margin-inline-end:6px }
    .muted{ color:#94a3b8 }
    .tiny{ font-size:11px }
    .mini{ font-size:12px; color:#a3e635 }
    .sep{ height:1px; background:#1f2937; margin:12px 0 }
    .notice{ font-size:12px; color:#93c5fd }
  </style>
</head>
<body>
  <header>
    <div class="title">Ø­Ø§Ø³Ø¨Ø© Ø­ØµØµ Ø£ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø·</div>
    <div class="subtitle">Ø§Ø­Ø³Ø¨ ÙƒÙ…ÙŠØ© Ø§Ù„Ø£ÙƒÙ„ Ø¨Ø§Ù„Ø¬Ø±Ø§Ù… Ù„ÙƒÙ„ ÙˆØ¬Ø¨Ø© Ø¨Ø³Ù‡ÙˆÙ„Ø© â€” Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ ÙˆØ²Ù† Ø§Ù„Ù‚Ø·ØŒ Ø¹Ø§Ù…Ù„ Ø§Ù„Ù†Ø´Ø§Ø·ØŒ ÙˆØ¹Ø¯Ø¯ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª.</div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card">
        <div class="badge">âš™ï¸ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
        <div class="two-col">
          <div>
            <label for="weight">ÙˆØ²Ù† Ø§Ù„Ù‚Ø· (ÙƒØ¬Ù…)</label>
            <input id="weight" type="number" step="0.01" placeholder="Ù…Ø«Ø§Ù„: 3.8" inputmode="decimal">
            <div class="hint">Ø§Ø­Ø³Ø¨ Ø¨Ø§Ù„Ù…ÙŠØ²Ø§Ù† Ù„Ø£Ù‚Ø±Ø¨ 0.1 ÙƒØ¬Ù….</div>
          </div>
          <div>
            <label for="meals">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø¨Ø§Ù„ÙŠÙˆÙ…</label>
            <input id="meals" type="number" step="1" min="1" placeholder="Ù…Ø«Ø§Ù„: 3">
            <div class="hint">ÙŠÙØ¶Ù„ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙŠÙˆÙ… 2â€“4 ÙˆØ¬Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø±ÙˆØªÙŠÙ†.</div>
          </div>
        </div>

        <div class="two-col" style="margin-top:10px">
          <div>
            <label for="life">Ø­Ø§Ù„Ø©/Ù†Ø´Ø§Ø· Ø§Ù„Ù‚Ø·</label>
            <select id="life">
              <option value="1.0">Ù…Ø®ØµØµ (Ø³Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø±Ø§Øª ÙŠØ¯ÙˆÙŠÙ‹Ø§)</option>
              <option value="1.2">Ø¨Ø§Ù„Øº Ù…Ø®ØµÙŠ/Ù…Ù†Ø²Ù„ÙŠ (1.2Ã—)</option>
              <option value="1.4">Ø¨Ø§Ù„Øº Ù†Ø´ÙŠØ· (1.4Ã—)</option>
              <option value="1.6">Ù‚Ø· ØµØºÙŠØ± (Ù†Ù…Ùˆ) (1.6Ã—)</option>
              <option value="1.8">Ù…Ø±Ø¶/ØªØ¹Ø§ÙÙŠ Ø¨Ø¥Ø´Ø±Ø§Ù Ø¨ÙŠØ·Ø±ÙŠ (1.8Ã— ØªÙ‚Ø¯ÙŠØ±ÙŠ)</option>
            </select>
            <div class="hint">Ø§Ù„Ù…Ø¹Ø§Ù…Ù„ ÙŠØ¶Ø±Ø¨ RER = 70 Ã— Ø§Ù„ÙˆØ²Ù†^0.75 Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ MER (Ø³Ø¹Ø±Ø§Øª/ÙŠÙˆÙ…).</div>
          </div>
          <div>
            <label for="energy100">ÙƒØ«Ø§ÙØ© Ø§Ù„Ø£ÙƒÙ„ (ÙƒÙŠÙ„Ùˆ ÙƒØ§Ù„ÙˆØ±ÙŠ Ù„ÙƒÙ„ 100Øº)</label>
            <input id="energy100" type="number" step="0.1" placeholder="Ù…Ø«Ø§Ù„: 90">
            <div class="hint">Ù…ÙˆØ¬ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù„Ø¨Ø©: &quot;kcal per 100g&quot; Ø£Ùˆ &quot;kcal/kg&quot;.</div>
          </div>
        </div>

        <div class="two-col" style="margin-top:10px">
          <div>
            <label for="customKcal">Ø³Ø¹Ø±Ø§Øª/ÙŠÙˆÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„Ùˆ ØªØ¨ÙŠ ØªØ¯Ø®Ù„Ù‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§)</label>
            <input id="customKcal" type="number" step="1" placeholder="Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø¶ÙŠ Ø¥Ø°Ø§ ØªØ¨ÙŠ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© ØªØ­Ø³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ">
            <div class="hint">Ù„Ùˆ ÙƒØªØ¨Øª Ù‚ÙŠÙ…Ø© Ù‡Ù†Ø§ØŒ Ø¨ØªØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ù†Ø´Ø§Ø· ÙˆØªØ­Ø³Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©.</div>
          </div>
          <div>
            <label for="rounding">ØªÙ‚Ø±ÙŠØ¨ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</label>
            <select id="rounding">
              <option value="1">1 ØºØ±Ø§Ù…</option>
              <option value="2">2 ØºØ±Ø§Ù…</option>
              <option value="5" selected>5 ØºØ±Ø§Ù…</option>
              <option value="10">10 ØºØ±Ø§Ù…</option>
            </select>
            <div class="hint">Ø§Ø®ØªØ± Ø£Ù‚Ø±Ø¨ Ø¯Ù‚Ø© Ù„Ù…ÙŠØ²Ø§Ù†Ùƒ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ.</div>
          </div>
        </div>

        <div class="controls">
          <button class="btn primary" id="calcBtn">Ø§Ø­Ø³Ø¨</button>
          <button class="btn" id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
          <div class="notice">Ø§Ù„ØµÙŠØºØ©: <span class="mini">RER = 70 Ã— (Ø§Ù„ÙˆØ²Ù†^0.75)</span> â† <span class="mini">MER = RER Ã— Ø§Ù„Ù…Ø¹Ø§Ù…Ù„</span></div>
        </div>
      </section>

      <section class="card">
        <div class="badge">ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬</div>
        <div class="results">
          <div class="result">
            <div class="label">Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
            <div class="value"><span id="mer">â€”</span> <span class="unit">kcal/ÙŠÙˆÙ…</span></div>
          </div>
          <div class="result">
            <div class="label">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
            <div class="value"><span id="gDay">â€”</span> <span class="unit">Øº/ÙŠÙˆÙ…</span></div>
          </div>
          <div class="result">
            <div class="label">Ø§Ù„ÙƒÙ…ÙŠØ© Ù„ÙƒÙ„ ÙˆØ¬Ø¨Ø©</div>
            <div class="value"><span id="gMeal">â€”</span> <span class="unit">Øº/ÙˆØ¬Ø¨Ø©</span></div>
          </div>
        </div>

        <div class="sep"></div>
        <div class="hint">
          Ø§Ù„ØªØ­ÙˆÙŠÙ„: <span class="tiny">Ø§Ù„Ø¬Ø±Ø§Ù…Ø§Øª/ÙŠÙˆÙ… = (Ø§Ù„Ø³Ø¹Ø±Ø§Øª/ÙŠÙˆÙ…) Ã· (kcal Ù„ÙƒÙ„ 100Øº) Ã— 100</span> â€¢
          <span class="tiny">Ø§Ù„Ø¬Ø±Ø§Ù…Ø§Øª/ÙˆØ¬Ø¨Ø© = Ø§Ù„Ø¬Ø±Ø§Ù…Ø§Øª/ÙŠÙˆÙ… Ã· Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</span>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="inner">
      <span class="warn">âš ï¸</span>
      <b>ØªÙ†ÙˆÙŠÙ‡:</b> ØªÙ… ØªØµÙ…ÙŠÙ… ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¨Ø´ÙƒÙ„ Ø®Ø§Øµ Ù…Ù† Ù‚ÙØ¨Ù„ Ù…Ø·ÙˆÙ‘Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¯ÙˆÙ† Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©ØŒ ØªÙ‡Ø¯Ù Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù†Ø§ØªØ¬Ø© Ø¥Ù„Ù‰ ØªÙ‚Ø¯ÙŠÙ… Ø£Ù‚Ø±Ø¨ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙ‚Ø·ØŒ ÙˆÙ„Ø§ ØªÙØ¹Ø¯ Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù† Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø¨ÙŠØ·Ø±ÙŠ Ø§Ù„Ù…Ø®ØªØµ.
    </div>
  </footer>

  <script>
    function pow075(x){ return Math.pow(x, 0.75); }
    function roundTo(val, step){ return Math.round(val/step)*step; }

    function parseNum(id){
      const el = document.getElementById(id);
      const v = parseFloat(el.value);
      return isFinite(v) ? v : null;
    }

    function setText(id, text){ document.getElementById(id).textContent = text; }

    function calc(){
      const w = parseNum('weight');
      const meals = parseNum('meals');
      const e100 = parseNum('energy100');
      const life = parseFloat(document.getElementById('life').value);
      const custom = parseNum('customKcal');
      const step = parseFloat(document.getElementById('rounding').value);

      // basic validation
      if(!w || w<=0){ alert('Ø­Ø· ÙˆØ²Ù† ØµØ­ÙŠØ­.'); return; }
      if(!meals || meals<=0){ alert('Ø­Ø¯Ø¯ Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª (ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„).'); return; }
      if(!e100 || e100<=0){ alert('Ø£Ø¯Ø®Ù„ ÙƒØ«Ø§ÙØ© Ø§Ù„Ø£ÙƒÙ„ (kcal Ù„ÙƒÙ„ 100Øº).'); return; }

      let mer;
      if(custom && custom>0){
        mer = custom;
      }else{
        const RER = 70 * pow075(w);
        mer = RER * life;
      }

      const gPerDay = (mer / e100) * 100;
      const gPerMeal = gPerDay / meals;

      setText('mer', Math.round(mer));
      setText('gDay', roundTo(gPerDay, step).toFixed(0));
      setText('gMeal', roundTo(gPerMeal, step).toFixed(0));
    }

    function resetAll(){
      ['weight','meals','energy100','customKcal'].forEach(id => document.getElementById(id).value='');
      document.getElementById('life').value='1.0';
      document.getElementById('rounding').value='5';
      ['mer','gDay','gMeal'].forEach(id => setText(id, 'â€”'));
    }

    document.getElementById('calcBtn').addEventListener('click', calc);
    document.getElementById('resetBtn').addEventListener('click', resetAll);

    // Simple deep-link: read URL params ?w=&meals=&e100=&life=&custom=
    (function initFromQuery(){
      const p = new URLSearchParams(location.search);
      if(p.has('w')) document.getElementById('weight').value = p.get('w');
      if(p.has('meals')) document.getElementById('meals').value = p.get('meals');
      if(p.has('e100')) document.getElementById('energy100').value = p.get('e100');
      if(p.has('life')) document.getElementById('life').value = p.get('life');
      if(p.has('custom')) document.getElementById('customKcal').value = p.get('custom');
      if(p.has('round')) document.getElementById('rounding').value = p.get('round');
    })();
  </script>
</body>
</html>
